webpackJsonp([8],{"4qdA":function(t,e){},"6wAr":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mvHQ"),i=s.n(n),a=s("VBGv"),c=s("m8uU"),l=s("PkiJ"),o=s("raJt"),r={id:0,num_id:0,num_pass:"",siren_type_id:"",siren_type:o.a,address:"",radio:"",desk:"",contact_id:0,contact:o.a,company_id:0,company:o.a,latitude:"",longitude:"",stage:"",own:"",note:""},u=s("FxBo"),d=s("OOvn"),m={name:"SirenItem",components:{"bulma-input":a.a,"bulma-button":c.a,"bulma-select":l.a},mixins:[u.a],data:function(){return{title:"",siren:r,siren_types:[o.a],contacts:[o.a],companies:[o.a]}},mounted:function(){this.fetchData()},methods:{submit:function(){var t=this,e="sirens",s="POST";"0"!==this.$route.params.id&&(e=e+"/"+this.$route.params.id,s="PUT");var n=this.siren;Object(d.a)({url:e,method:s,mode:"cors",data:i()(n)}).then(function(){t.close()})},close:function(){this.$router.push("/sirens")},onSelect:function(t,e){this.siren[e]=t,this.siren[e+"_id"]=t.id},delete:function(){},fetchData:function(){this.fetchItem("sirens",["siren","siren_types","contacts","companies"],!0)},afterFetch:function(){this.setSelect("siren","siren_types","siren_type","siren_type_id"),this.setSelect("siren","contacts","contact","contact_id"),this.setSelect("siren","companies","company","company_id")},setSelect:function(t,e,s,n){var i=this;this[t][s]=this[e].find(function(e){return e.id===i[t][n]})}}},p={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"container mw768"},[s("form",{attrs:{model:t.siren,id:"siren"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half"},[s("bulma-input",{attrs:{type:"text",label:"",placeholder:"Серийный номер",iconLeft:"tag"},model:{value:t.siren.num_pass,callback:function(e){t.$set(t.siren,"num_pass",e)},expression:"siren.num_pass"}})],1),t._v(" "),s("div",{staticClass:"column is-half"},[s("bulma-select",{attrs:{list:t.siren_types,"selected-item":t.siren.siren_type,label:"Тип сирены","item-name":"siren_type",iconLeft:"tag"},on:{select:t.onSelect}})],1)]),t._v(" "),s("bulma-input",{attrs:{type:"text",label:"",placeholder:"Адрес",iconLeft:"address-card"},model:{value:t.siren.address,callback:function(e){t.$set(t.siren,"address",e)},expression:"siren.address"}}),t._v(" "),s("bulma-select",{attrs:{list:t.contacts,"selected-item":t.siren.contact,label:"Контактное лицо","item-name":"contact",iconLeft:"user"},on:{select:t.onSelect}}),t._v(" "),s("bulma-select",{attrs:{list:t.companies,"selected-item":t.siren.company,label:"Организация","item-name":"company",iconLeft:"building"},on:{select:t.onSelect}}),t._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half"},[s("bulma-input",{attrs:{label:"",placeholder:"Широта",iconLeft:"tag"},model:{value:t.siren.latitude,callback:function(e){t.$set(t.siren,"latitude",e)},expression:"siren.latitude"}})],1),t._v(" "),s("div",{staticClass:"column is-half"},[s("bulma-input",{attrs:{label:"",placeholder:"Долгота",iconLeft:"tag"},model:{value:t.siren.longitude,callback:function(e){t.$set(t.siren,"longitude",e)},expression:"siren.longitude"}})],1)]),t._v(" "),s("bulma-input",{attrs:{label:"",placeholder:"Заметка",iconLeft:"comment"},model:{value:t.siren.note,callback:function(e){t.$set(t.siren,"note",e)},expression:"siren.note"}}),t._v(" "),s("div",{staticClass:"field is-grouped is-grouped-centered"},[s("div",{staticClass:"control"},[s("bulma-button",{attrs:{text:"Сохранить",color:"primary"},on:{click:t.submit}})],1),t._v(" "),s("div",{staticClass:"control"},[s("bulma-button",{attrs:{text:"Закрыть"},on:{click:t.close}})],1),t._v(" "),s("div",{staticClass:"control"},[s("bulma-button",{attrs:{text:"Удалить",color:"danger",onclick:"return confirm('Вы действительно хотите удалить эту запись?');"}})],1)])],1)])},staticRenderFns:[]};var f=s("VU/8")(m,p,!1,function(t){s("4qdA")},"data-v-2f52bc6e",null);e.default=f.exports}});
//# sourceMappingURL=8.e9204cbc2ea90b60a773.js.map