webpackJsonp([7],{"2wpX":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s("mvHQ"),i=s.n(n),a=s("GE6z"),c=s("MeX/"),o=s("jKBc"),r=s("OOvn"),l={name:"siren",components:{"vue-input":a.a,"vue-button":c.a,"vue-select":o.a},data:function(){return{title:"",siren:{id:0,num_id:0,num_pass:"",siren_type_id:"",siren_type:{id:0,name:""},address:"",radio:"",desk:"",contact_id:0,contact:{id:0,name:""},company_id:0,company:{id:0,name:""},latitude:"",longtitude:"",stage:"",own:"",note:""},siren_types:[{id:0,name:""}],contacts:[{id:0,name:""}],companies:[{id:0,name:""}]}},mounted:function(){this.fetchData()},methods:{submit:function(){var e=this,t="sirens",s="POST";"0"!==this.$route.params.id&&(t=t+"/"+this.$route.params.id,s="PUT");var n=this.siren;Object(r.a)({url:t,method:s,mode:"cors",data:i()(n)}).then(function(){e.close()})},close:function(){this.$router.push("/sirens")},onSelect:function(e,t){this.siren[t]=e,this.siren[t+"_id"]=e.id},delete:function(){},fetchData:function(){var e=this;Object(r.a)({url:"sirens/"+this.$route.params.id,method:"GET"}).then(function(t){e.siren=t.data.siren,e.siren_types=t.data.siren_types,e.contacts=t.data.contacts,e.companies=t.data.companies,e.setSelect("siren","siren_types","siren_type","siren_type_id"),e.setSelect("siren","contacts","contact","contact_id"),e.setSelect("siren","companies","company","company_id"),e.isLoaded=!0})},setSelect:function(e,t,s,n){var i=this;this[e][s]=this[t].find(function(t){return t.id===i[e][n]})}}},d={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container mw768"},[s("form",{attrs:{model:e.siren,id:"siren"}},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half"},[s("vue-input",{attrs:{type:"text",label:"",placeholder:"Серийный номер",icon:"tag"},model:{value:e.siren.num_pass,callback:function(t){e.$set(e.siren,"num_pass",t)},expression:"siren.num_pass"}})],1),e._v(" "),s("div",{staticClass:"column is-half"},[s("vue-select",{attrs:{list:e.siren_types,"selected-item":e.siren.siren_type,label:"Тип сирены","item-name":"siren_type",icon:"tag"},on:{select:e.onSelect}})],1)]),e._v(" "),s("vue-input",{attrs:{type:"text",label:"",placeholder:"Адрес",icon:"address-card"},model:{value:e.siren.address,callback:function(t){e.$set(e.siren,"address",t)},expression:"siren.address"}}),e._v(" "),s("vue-select",{attrs:{list:e.contacts,"selected-item":e.siren.contact,label:"Контактное лицо","item-name":"contact",icon:"user"},on:{select:e.onSelect}}),e._v(" "),s("vue-select",{attrs:{list:e.companies,"selected-item":e.siren.company,label:"Организация","item-name":"company",icon:"building"},on:{select:e.onSelect}}),e._v(" "),s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-half"},[s("vue-input",{attrs:{label:"",placeholder:"Широта",icon:"tag"},model:{value:e.siren.latitude,callback:function(t){e.$set(e.siren,"latitude",t)},expression:"siren.latitude"}})],1),e._v(" "),s("div",{staticClass:"column is-half"},[s("vue-input",{attrs:{label:"",placeholder:"Долгота",icon:"tag"},model:{value:e.siren.longitude,callback:function(t){e.$set(e.siren,"longitude",t)},expression:"siren.longitude"}})],1)]),e._v(" "),s("vue-input",{attrs:{label:"",placeholder:"Заметка",icon:"comment"},model:{value:e.siren.note,callback:function(t){e.$set(e.siren,"note",t)},expression:"siren.note"}}),e._v(" "),s("div",{staticClass:"field is-grouped is-grouped-centered"},[s("div",{staticClass:"control"},[s("vue-button",{attrs:{text:"Сохранить",color:"primary"},on:{click:e.submit}})],1),e._v(" "),s("div",{staticClass:"control"},[s("vue-button",{attrs:{text:"Закрыть"},on:{click:e.close}})],1),e._v(" "),s("div",{staticClass:"control"},[s("vue-button",{attrs:{text:"Удалить",color:"danger",onclick:"return confirm('Вы действительно хотите удалить эту запись?');"}})],1)])],1)])},staticRenderFns:[]};var u=s("VU/8")(l,d,!1,function(e){s("UYBX")},"data-v-73ad0ed8",null);t.default=u.exports},UYBX:function(e,t){}});
//# sourceMappingURL=7.22ffdb268cc070e087da.js.map