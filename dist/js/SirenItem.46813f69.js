(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["SirenItem"],{"0036":function(t,e,n){"use strict";n("7514"),n("ac6a");var i=n("8daa");e["a"]={data:function(){return{fetched:!1,list:[]}},methods:{fetchItem:function(t,e,n){var s=this;this.fetched||Object(i["a"])({url:"".concat(t,"/").concat(this.$route.params.id),method:"GET"}).then(function(t){e.forEach(function(e){s[e]=t.data[e]}),s.fetched=!0,n&&s.afterFetch()})},setSelect:function(t,e,n,i){var s=this;this[t][n]=this[e].find(function(e){return e.id===s[t][i]})}}}},"0a49":function(t,e,n){var i=n("9b43"),s=n("626a"),a=n("4bf8"),c=n("9def"),r=n("cd1c");t.exports=function(t,e){var n=1==t,o=2==t,l=3==t,u=4==t,d=6==t,f=5==t||d,m=e||r;return function(e,r,p){for(var h,b,v=a(e),y=s(v),_=i(r,p,3),g=c(y.length),x=0,S=n?m(e,g):o?m(e,0):void 0;g>x;x++)if((f||x in y)&&(h=y[x],b=_(h,x,v),t))if(n)S[x]=b;else if(b)switch(t){case 3:return!0;case 5:return h;case 6:return x;case 2:S.push(h)}else if(u)return!1;return d?-1:l||u?u:S}}},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},7514:function(t,e,n){"use strict";var i=n("5ca1"),s=n("0a49")(5),a="find",c=!0;a in[]&&Array(1)[a](function(){c=!1}),i(i.P+i.F*c,"Array",{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(a)},"8eeb":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container mw768"},[n("form",{attrs:{model:t.siren,id:"siren"}},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-half"},[n("bulma-input",{attrs:{label:"",placeholder:"Серийный номер",iconLeft:"tag"},model:{value:t.siren.num_pass,callback:function(e){t.$set(t.siren,"num_pass",e)},expression:"siren.num_pass"}})],1),n("div",{staticClass:"column is-half"},[n("bulma-select",{attrs:{list:t.siren_types,"selected-item":t.siren.siren_type,label:"Тип сирены","item-name":"siren_type",iconLeft:"tag"},on:{select:t.onSelect}})],1)]),n("bulma-input",{attrs:{label:"",placeholder:"Адрес",iconLeft:"address-card"},model:{value:t.siren.address,callback:function(e){t.$set(t.siren,"address",e)},expression:"siren.address"}}),n("bulma-select",{attrs:{list:t.contacts,"selected-item":t.siren.contact,label:"Контактное лицо","item-name":"contact",iconLeft:"user"},on:{select:t.onSelect}}),n("bulma-select",{attrs:{list:t.companies,"selected-item":t.siren.company,label:"Организация","item-name":"company",iconLeft:"building"},on:{select:t.onSelect}}),n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-half"},[n("bulma-input",{attrs:{label:"",placeholder:"Широта",iconLeft:"tag"},model:{value:t.siren.latitude,callback:function(e){t.$set(t.siren,"latitude",e)},expression:"siren.latitude"}})],1),n("div",{staticClass:"column is-half"},[n("bulma-input",{attrs:{label:"",placeholder:"Долгота",iconLeft:"tag"},model:{value:t.siren.longitude,callback:function(e){t.$set(t.siren,"longitude",e)},expression:"siren.longitude"}})],1)]),n("bulma-input",{attrs:{label:"",placeholder:"Заметка",iconLeft:"comment"},model:{value:t.siren.note,callback:function(e){t.$set(t.siren,"note",e)},expression:"siren.note"}}),n("div",{staticClass:"field is-grouped is-grouped-centered"},[n("div",{staticClass:"control"},[n("bulma-button",{attrs:{text:"Сохранить",color:"primary"},on:{click:t.submit}})],1),n("div",{staticClass:"control"},[n("bulma-button",{attrs:{text:"Закрыть"},on:{click:t.close}})],1),n("div",{staticClass:"control"},[n("bulma-button",{attrs:{text:"Удалить",color:"danger",onclick:"return confirm('Вы действительно хотите удалить эту запись?');"}})],1)])],1)])},s=[],a=(n("7514"),n("e04f")),c=n("e653"),r=n("ce02"),o=n("7234"),l={id:0,num_id:0,num_pass:"",siren_type_id:"",siren_type:o["a"],address:"",radio:"",desk:"",contact_id:0,contact:o["a"],company_id:0,company:o["a"],latitude:"",longitude:"",stage:"",own:"",note:""},u=n("0036"),d=n("8daa"),f={name:"SirenItem",components:{"bulma-input":a["a"],"bulma-button":c["a"],"bulma-select":r["a"]},mixins:[u["a"]],data:function(){return{title:"",siren:l,siren_types:[o["a"]],contacts:[o["a"]],companies:[o["a"]]}},mounted:function(){this.fetchData()},methods:{submit:function(){var t=this,e="sirens",n="POST";"0"!==this.$route.params.id&&(e="".concat(e,"/").concat(this.$route.params.id),n="PUT");var i=this.siren;Object(d["a"])({url:e,method:n,mode:"cors",data:JSON.stringify(i)}).then(function(){t.close()})},close:function(){this.$router.go(-2)},onSelect:function(t,e){this.siren[e]=t,this.siren["".concat(e,"_id")]=t.id},delete:function(){},fetchData:function(){this.fetchItem("sirens",["siren","siren_types","contacts","companies"],!0)},afterFetch:function(){this.setSelect("siren","siren_types","siren_type","siren_type_id"),this.setSelect("siren","contacts","contact","contact_id"),this.setSelect("siren","companies","company","company_id")},setSelect:function(t,e,n,i){var s=this;this[t][n]=this[e].find(function(e){return e.id===s[t][i]})}}},m=f,p=(n("8f4a"),n("2877")),h=Object(p["a"])(m,i,s,!1,null,"1c2b5590",null);e["default"]=h.exports},"8f4a":function(t,e,n){"use strict";var i=n("dfa0"),s=n.n(i);s.a},cd1c:function(t,e,n){var i=n("e853");t.exports=function(t,e){return new(i(t))(e)}},dfa0:function(t,e,n){},e853:function(t,e,n){var i=n("d3f4"),s=n("1169"),a=n("2b4c")("species");t.exports=function(t){var e;return s(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!s(e.prototype)||(e=void 0),i(e)&&(e=e[a],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=SirenItem.46813f69.js.map